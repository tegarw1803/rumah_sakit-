// Hospital Management System Schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// Admin User
model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Doctor
model Doctor {
  id          String            @id @default(cuid())
  name        String
  specialty   String
  phone       String?
  photo       String?
  bio         String?
  isActive    Boolean           @default(true)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  schedules   DoctorSchedule[]
  appointments Appointment[]

  @@unique([name, phone])
}

// Doctor Schedule
model DoctorSchedule {
  id          String   @id @default(cuid())
  doctorId    String
  dayOfWeek   String   // Senin, Selasa, Rabu, Kamis, Jumat, Sabtu, Minggu
  startTime   String   // Format: HH:mm
  endTime     String   // Format: HH:mm
  poli        String
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  doctor      Doctor   @relation(fields: [doctorId], references: [id], onDelete: Cascade)
}

// Appointment
model Appointment {
  id          String   @id @default(cuid())
  patientName String
  phone       String
  doctorId    String
  scheduleId  String?
  visitDate   DateTime
  notes       String?
  status      String   @default("pending") // pending, confirmed, completed, cancelled
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  doctor      Doctor   @relation(fields: [doctorId], references: [id])
}

// Page Section (for CMS)
model PageSection {
  id          String   @id @default(cuid())
  sectionKey String   @unique // hero, profile, services, contact
  title       String?
  content     String   // JSON or HTML content
  isActive    Boolean  @default(true)
  displayOrder Int    @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Site Settings
model SiteSetting {
  id            String   @id @default(cuid())
  key           String   @unique
  value         String
  category      String   @default("general") // general, theme, notification
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// Medical Service
model Service {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  icon        String?
  isActive    Boolean  @default(true)
  displayOrder Int    @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Branding (Logo, favicon, social media)
model Branding {
  id            String   @id @default(cuid())
  logoUrl       String?
  faviconUrl    String?
  hospitalName  String
  tagline       String?
  facebookUrl   String?
  twitterUrl    String?
  instagramUrl  String?
  youtubeUrl    String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
